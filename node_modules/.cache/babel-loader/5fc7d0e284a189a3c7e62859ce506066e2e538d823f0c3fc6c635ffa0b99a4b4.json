{"ast":null,"code":"var _jsxFileName = \"/home/ricky/Development/Phase 4/Project/SoundScape-FrontEnd/src/components/SongVideo.js\",\n  _s = $RefreshSig$();\nimport React from 'react';\nimport YouTube from 'react-youtube';\nimport CommentForm from './CommentForm';\nimport Comment from './Comment';\nimport { useState, useEffect } from \"react\";\nimport \"../css/SongVideo.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SongVideo = _ref => {\n  _s();\n  let {\n    songVideo,\n    opts,\n    onHandleDelete,\n    users\n  } = _ref;\n  const [songVideoComments, setSongVideoComments] = useState([]);\n  const {\n    id,\n    title,\n    video_url,\n    comments,\n    user\n  } = songVideo;\n  let videoId;\n  video_url.startsWith(\"https://youtu.be\") ? videoId = video_url.slice(17, 28) : videoId = video_url.slice(32, 43);\n  useEffect(() => {\n    fetch(`https://railsapp-soundscape.onrender.com/song_videos/${id}`).then(r => r.json()).then(songVideo => {\n      setSongVideoComments([...songVideo.song_video_comments]);\n    });\n  }, [id]);\n  // console.log(songVideoComments);\n\n  function handleDelete() {\n    fetch(`https://railsapp-soundscape.onrender.com/song_videos/${id}`, {\n      method: 'DELETE'\n    });\n    onHandleDelete(id);\n  }\n  function onAddComment(newComment) {\n    setSongVideoComments([...songVideoComments, newComment]);\n  }\n  function handleDeleteComment(id) {\n    const deleteComment = songVideoComments.filter(comment => comment.id !== id);\n    setSongVideoComments(deleteComment);\n    fetch(`https://railsapp-soundscape.onrender.com/song_video_comments/${id}`, {\n      method: 'DELETE'\n    });\n  }\n  function onUpdateComment(updatedSongVideoComment) {\n    const updatedsongVideoComments = songVideoComments.map(songVideoComment => {\n      if (songVideoComment.id === updatedSongVideoComment.id) {\n        return updatedSongVideoComment;\n      } else {\n        return songVideoComment;\n      }\n    });\n    setSongVideoComments(updatedsongVideoComments);\n  }\n  let displayDelete;\n  users && users.id === user.id ? displayDelete = /*#__PURE__*/_jsxDEV(\"button\", {\n    className: \"x-btn\",\n    onClick: handleDelete,\n    children: \"x\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 56,\n    columnNumber: 21\n  }, this) : displayDelete = null;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"vid-post-info\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: [displayDelete, title]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"b\", {\n          children: \"Review:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 12\n        }, this), \" \", comments]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(YouTube, {\n      videoId: videoId,\n      opts: opts,\n      className: \"song_video\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"add-comment\",\n      children: \"Comments:\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this), songVideoComments.map(songVideoComment => /*#__PURE__*/_jsxDEV(Comment, {\n      songVideoComment: songVideoComment,\n      handleDeleteComment: handleDeleteComment,\n      onUpdateComment: onUpdateComment,\n      users: users\n    }, songVideoComment, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 50\n    }, this)), /*#__PURE__*/_jsxDEV(CommentForm, {\n      onAddComment: onAddComment,\n      songVideoId: id,\n      users: users\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 61,\n    columnNumber: 5\n  }, this);\n};\n_s(SongVideo, \"/E0GsAjsZU2l1r1Ycr6NNAqnIuY=\");\n_c = SongVideo;\nexport default SongVideo;\nvar _c;\n$RefreshReg$(_c, \"SongVideo\");","map":{"version":3,"names":["React","YouTube","CommentForm","Comment","useState","useEffect","jsxDEV","_jsxDEV","SongVideo","_ref","_s","songVideo","opts","onHandleDelete","users","songVideoComments","setSongVideoComments","id","title","video_url","comments","user","videoId","startsWith","slice","fetch","then","r","json","song_video_comments","handleDelete","method","onAddComment","newComment","handleDeleteComment","deleteComment","filter","comment","onUpdateComment","updatedSongVideoComment","updatedsongVideoComments","map","songVideoComment","displayDelete","className","onClick","children","fileName","_jsxFileName","lineNumber","columnNumber","songVideoId","_c","$RefreshReg$"],"sources":["/home/ricky/Development/Phase 4/Project/SoundScape-FrontEnd/src/components/SongVideo.js"],"sourcesContent":["import React from 'react'\nimport YouTube from 'react-youtube'\nimport CommentForm from './CommentForm';\nimport Comment from './Comment';\nimport { useState, useEffect } from \"react\";\nimport \"../css/SongVideo.css\"\n\nconst SongVideo = ( { songVideo, opts, onHandleDelete, users } ) => {\n  const [songVideoComments, setSongVideoComments] = useState([])\n  const { id, title, video_url, comments, user } = songVideo\n\n  let videoId\n  video_url.startsWith(\"https://youtu.be\") ? videoId = video_url.slice(17, 28) : videoId = video_url.slice(32, 43)\n\n  useEffect(() => {\n      fetch(`https://railsapp-soundscape.onrender.com/song_videos/${id}`)\n      .then((r) => r.json())\n      .then(songVideo => {\n          setSongVideoComments([...songVideo.song_video_comments])\n      })\n  }, [id])\n// console.log(songVideoComments);\n\n  function handleDelete() {\n    fetch(`https://railsapp-soundscape.onrender.com/song_videos/${id}`, {\n      method: 'DELETE'\n    });\n    onHandleDelete(id)\n  }\n\n  function onAddComment(newComment){\n      setSongVideoComments([...songVideoComments, newComment])\n  }\n\n  function handleDeleteComment(id) {\n    const deleteComment = songVideoComments.filter((comment) => comment.id !== id)\n    setSongVideoComments(deleteComment) \n    fetch(`https://railsapp-soundscape.onrender.com/song_video_comments/${id}`, {\n        method:'DELETE'\n      })\n  }\n\n  function onUpdateComment(updatedSongVideoComment) {\n  const updatedsongVideoComments = songVideoComments.map(songVideoComment => {\n    if (songVideoComment.id === updatedSongVideoComment.id) {\n      return updatedSongVideoComment\n    } else {\n      return songVideoComment\n    }\n  })\n  setSongVideoComments(updatedsongVideoComments)\n  }\n\n  let displayDelete\n  users && users.id === user.id ? \n    displayDelete = <button className='x-btn' onClick={handleDelete}>x</button>\n    :\n    displayDelete = null\n\n  return (\n    <div>\n      <div className='vid-post-info'>\n        <h2>{displayDelete}{title}</h2>        \n        <p><b>Review:</b> {comments}</p>  \n      </div>\n\n    \n   \n     \n      <YouTube videoId={videoId} opts={opts} className=\"song_video\"/>\n      \n      <h2 className='add-comment'>Comments:</h2>\n      {songVideoComments.map(songVideoComment => <Comment key={songVideoComment} songVideoComment={songVideoComment} handleDeleteComment={handleDeleteComment} onUpdateComment={onUpdateComment} users={users} />)}\n\n      <CommentForm onAddComment={onAddComment} songVideoId={id} users={users} />\n\n    </div>\n  );\n};\n\nexport default SongVideo;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}